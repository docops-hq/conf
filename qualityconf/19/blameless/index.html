<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Blameless environment: никто не должен писать качественный код &middot; Конспекты</title><link rel=stylesheet href=/conf/css/style.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700"><link rel=stylesheet href=/conf/custom.css><link rel=icon type=image/png sizes=32x32 href=/conf/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/conf/images/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/conf/images/apple-touch-icon.png><link href rel=alternate type=application/rss+xml title=Конспекты><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107215405-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-107215405-3');</script></head><body><nav class=nav><div class=nav-container><a href=/conf/><h2 class=nav-title>Конспекты</h2></a><ul><li><a href=/conf/>Posts</a></li></ul></div></nav><main><div class=post><div class=single__header><div class=post-info>Никита Соболев, wemake.services</div><h1 class=post-title>Blameless environment: никто не должен писать качественный код</h1><div class=post-line></div><div class=tag-block><span class=catalogue-tags><a href=/conf/tags/qualityconf class=tags>QualityConf</a></span><span class=catalogue-tags><a href=/conf/tags/2019 class=tags>2019</a></span></div></div><h2 id=бывает-что-всё-очень-плохо>Бывает, что всё очень плохо</h2><ul><li>Плохой код, никто не думает о качестве кода.</li><li>Плохие процессы, аутсорс и бардак.</li><li>Плохие клиенты и вообще всё плохо.</li></ul><p>Наверное, это люди виноваты!
А вот когда люди изменятся, всё станет иначе.
Ещё наверное, в других местах работают другие люди, и те люди лучше, и там работать лучше.</p><p>Но нет, это неправда.</p><p>Хочется это поменять, создать новый порядок.
Совершенно непонятно, как его создать.
В книжках не написано и в университете не учили.</p><h2 id=постановка-задачи>Постановка задачи</h2><p>Начнём с постановки задачи.
Бывают задачи из одной строки.
Человек делает такую задачу и у него получается не то.
Проще обвинить человека, но на самом деле задача плохо поставлена.</p><p>Хорошие постановки задач:</p><ul><li>Короткие и понятные.</li><li>Упорядоченные: ясно, в каком порядке их лучше делать.</li><li>Индивидуальные: кому-то принадлежат.</li></ul><p>Если постановка хорошая, то люди, внезапно, делают хорошо.</p><h2 id=чего-на-самом-деле-хочет-заказчик>Чего на самом деле хочет заказчик</h2><p>Есть требования: что должно быть сделано в целом.
Но по требованиям нельзя работать.
Нужна декомпозиция задач в документации.</p><p>Требования — что нужно сделать, документация — как.
Из требований можно генерировать документацию.
Следующий шаг — сделать тесты, а потом написать код.</p><p>Получается, чтобы заказчик и разработчик встретились, нужно выстроить цепочку от требований к коду.</p><h2 id=общение>Общение</h2><p>Люди хотят общаться, и на работе это может быть проблемой.
Например, они разговаривают и вырывают друг друга из состояния потока.
А ещё есть митинги, на которых люди тратят время друг друга.</p><p>Люди конфликтны.
Особенно, когда они находятся в тесном помещении и ситуация сталкивает их.</p><p>Бывает также, что люди пропадают, особенно если они работали удалённо.
Просто больше не отвечают на звонки.</p><p>Как структурировать общение?</p><ol><li><p>Удалить соцсети.
Тогда люди не могут тебе написать куда угодно.</p></li><li><p>Выбрать один канал для общения, который удобен для работы.
В wemake.services для общения выбрали GitLab.
Всё там, даже вопрос по работе задают там.
Обсудить новую технологию? Создай тикет.
Обсудить Игру Престолов? Нет, спасибо, с этим к друзьям.</p></li></ol><h2 id=все-пишут-плохой-код>Все пишут плохой код</h2><p>Мы созданы не для того, чтобы писать код.
Код вообще сложный.
Нормально, что нам сложно писать код.
Все пишут плохой код.</p><p>Чтобы облегчить написание кода, нужна <strong>строгость</strong>.
Строгость нам даст CI.
Он должен быть <strong>неотвратимым</strong> и обязательным для всех.
Если кто-то может коммитить в мастер, будет бардак.</p><p>Всё это вместе ведёт к <strong>развитию</strong>.
Если есть строгий CI, каждый кусочек кода делает проект лучше.
Но люди всё равно будут делать ошибки и это нормально.</p><p>Можно возвращать ошибки людям, вместе с обвинениями.
«Ты сделал плохой код, иди и поправь».
Но это плохо работает.</p><h2 id=blameless-environment>Blameless environment</h2><p>Если в проекте есть баг, чья это проблема?
Это проблема проекта и больше ничья.
Баг нужно исправить так, чтобы он больше не случился.</p><ul><li>Если он в коде, написать регрессионный тест.</li><li>Если в инфраструктуре — использовать инструмент, который его предотвратит.</li></ul><p>Когда исправляешь баги на системном уровне, появляется развитие.</p><p>Следующий шаг после CI — ревью кода.
И каждый шаг имеет смысл, только если правильно выполнен предыдущий.
Если код не прошёл CI, незачем его ревьюить.
Если задача неправильно поставлена, то никакой CI этого не обнаружит, и ревью тоже не всегда.</p><h2 id=баги-это-хорошо>Баги — это хорошо</h2><p>Бывает культура, в которой баги — это плохо.
А если человек не тестировщик и зарепортил баг — он плохой, срывает процесс и суёт палки в колёса.
Зарепортить баг — это как будто сказать «код твой плохой и ты сам плохой».</p><p>В blameless environment баги — это благо.
Баги помогают развиваться.
Поэтому нужно поощрять и уважать людей, которые репортят баги.
Как этого добиться?</p><h2 id=виноваты-не-люди-виновата-система>Виноваты не люди, виновата система</h2><p>система, которая поощряет:</p><ul><li>писать плохой код,</li><li>тратить время на встречи,</li><li>и делать всё остальное, что плохо.</li></ul><p>Исправляйте систему.</p><h2 id=имплементация>Имплементация</h2><p>Вот принципы работы в wemake.services:</p><ul><li>Полная свобода действий.
Хочешь — работаешь.
Не хочешь — не работаешь.</li><li>Нет общения.
В том числе нет системы информирования о том, будет человек сегодня работать или нет.</li><li>Поэтому нет команды.</li><li>Боты управляют людьми.</li><li>Всё код: код, тесты, требования, документация.</li><li>Оплата за результат, тикеты и ревью.</li><li>Всё проверяется: тикеты, ревью, код.</li></ul></div><div class=pagination><a href=/conf/highload/18/2.1-vk-architecture/ class="left arrow">&#8592;</a>
<a href=/conf/highload/18/1.5-kafka-bicycle/ class="right arrow">&#8594;</a>
<a href=# class=top>Top</a></div></main><footer><span>&copy; <time datetime="2021-09-16 15:13:52.94193308 &#43;0000 UTC m=&#43;0.091580325">2021</time> . Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.</span></footer></body></html>